import os
import time

# -------------------------------------------------------------------
# [åœ¨é€™è£¡æ”¾ç½®ä½ æ‰€æœ‰çš„ import å’Œ API é‡‘é‘°è¨­å®š]
# ä¾‹å¦‚ï¼š
# from google.cloud import aiplatform
# from google.generativeai.client import get_default_client_async
# from adk.api import agents
# from adk.api import tools
#
# # å»ºè­°ä½¿ç”¨ç’°å¢ƒè®Šæ•¸ä¾†ç®¡ç†ä½ çš„ API é‡‘é‘°ï¼Œè€Œä¸æ˜¯ç›´æ¥å¯«åœ¨ç¨‹å¼ç¢¼è£¡
# GEMINI_API_KEY = os.environ.get("GEMINI_API_KEY")
# GOOGLE_API_KEY = os.environ.get("GOOGLE_API_KEY")
# GOOGLE_CSE_ID = os.environ.get("GOOGLE_CSE_ID")
#
# # [åœ¨é€™è£¡æ”¾ç½®ä½ å®šç¾© SearchTool å’Œ Agent çš„ç¨‹å¼ç¢¼]
# # ... ä½ çš„ SearchTool é¡åˆ¥/å‡½å¼ ...
# # ... ä½ çš„ Agent åˆå§‹åŒ–ç¨‹å¼ç¢¼ ...
# -------------------------------------------------------------------


def run_agent_interaction(question: str) -> str:
    """
    é€™å€‹å‡½å¼å°è£äº†èˆ‡ AI Agent äº’å‹•çš„æ‰€æœ‰é‚è¼¯ã€‚
    å®ƒæ¥æ”¶ä¸€å€‹å•é¡Œï¼Œä¸¦è¿”å› AI ç”Ÿæˆçš„ç­”æ¡ˆã€‚
    """
    # âš¡ï¸ åœ¨é€™è£¡æ•´åˆä½ ç¾æœ‰çš„ AI Agent é‚è¼¯
    # -------------------------------------------------------------------
    # [START] å°‡ä½ ç¾æœ‰çš„ Agent åŸ·è¡Œé‚è¼¯æ”¾åœ¨é€™è£¡
    # -------------------------------------------------------------------
    print("ğŸ§  AI æ­£åœ¨æ€è€ƒä¸­ï¼Œè«‹ç¨å€™...")
    
    # é€™æ˜¯æ¨¡æ“¬çš„ AI è™•ç†éç¨‹ï¼Œä½ éœ€è¦æ›¿æ›æˆä½ çœŸå¯¦çš„ç¨‹å¼ç¢¼
    # ä¾‹å¦‚ï¼š result = agent.generate(question)
    time.sleep(3) # æ¨¡æ“¬ç¶²è·¯è«‹æ±‚å’Œ AI è™•ç†çš„æ™‚é–“
    mock_answer = f"é€™æ˜¯é‡å°ã€Œ{question}ã€çš„æ‘˜è¦å›ç­”ã€‚\n\n" \
                  "1.  **é‡é»ä¸€**ï¼šAI é€é Tool Use å‘¼å«äº† Google Custom Search APIã€‚\n" \
                  "2.  **é‡é»äºŒ**ï¼šå®ƒå¾æœå°‹çµæœä¸­æå–äº†æœ€ç›¸é—œçš„è³‡è¨Šã€‚\n" \
                  "3.  **é‡é»ä¸‰**ï¼šæœ€å¾Œï¼ŒGemini æ¨¡å‹å°‡è³‡è¨ŠåŒ¯ç¸½æˆé€™å€‹ç°¡æ½”çš„æ‘˜è¦ã€‚\n"

    # return result
    return mock_answer
    # -------------------------------------------------------------------
    # [END] Agent åŸ·è¡Œé‚è¼¯çµæŸ
    # -------------------------------------------------------------------


def main():
    """
    ä¸»ç¨‹å¼ï¼Œè² è²¬è™•ç†ä½¿ç”¨è€…ä»‹é¢å’Œäº’å‹•æµç¨‹ã€‚
    """
    # æ­¡è¿è¨Šæ¯
    print("=" * 50)
    print("ğŸ¤– æ­¡è¿ä½¿ç”¨ AI Web Explorer æ™ºèƒ½ç ”ç©¶æ©Ÿå™¨äºº ğŸ¤–")
    print("=" * 50)
    print("ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„ AI ç ”ç©¶å¤¥ä¼´ã€‚")
    print("ä½ å¯ä»¥å•æˆ‘ä»»ä½•å•é¡Œï¼Œæˆ‘æœƒä¸Šç¶²æœå°‹ä¸¦ç‚ºä½ æ‘˜è¦ç­”æ¡ˆã€‚")
    print("è¼¸å…¥ 'exit' æˆ– 'quit' å³å¯é›¢é–‹ç¨‹å¼ã€‚")
    print("-" * 50)

    # äº’å‹•è¿´åœˆ
    while True:
        # ç²å–ä½¿ç”¨è€…è¼¸å…¥
        user_question = input("â“ ä½ æƒ³å•ä»€éº¼ï¼Ÿ\n> ")

        # æª¢æŸ¥æ˜¯å¦è¦é€€å‡º
        if user_question.lower() in ['exit', 'quit']:
            print("\nğŸ‘‹ æ„Ÿè¬ä½¿ç”¨ï¼Œå†è¦‹ï¼")
            break

        # æª¢æŸ¥è¼¸å…¥æ˜¯å¦ç‚ºç©º
        if not user_question.strip():
            print("â— è«‹è¼¸å…¥ä¸€å€‹å•é¡Œã€‚")
            continue

        print("-" * 50)
        
        # åŸ·è¡Œ AI Agent äº’å‹•ä¸¦ç²å–ç­”æ¡ˆ
        final_answer = run_agent_interaction(user_question)

        # æ ¼å¼åŒ–ä¸¦å‘ˆç¾ç­”æ¡ˆ
        print("\nğŸ’¡ AI æ‘˜è¦çš„ç­”æ¡ˆï¼š")
        print("-" * 20)
        print(final_answer)
        print("-" * 50)


if __name__ == "__main__":
    main()
